<!doctype html>
<table
    id="table_primary"
    data-show-export="true"
    data-export-types="['excel', 'csv']"
    data-export-data-type="all"
    data-toggle="table"
    data-pagination="true"
    data-page-size="5"
    data-url=""
    data-page-list="[5,10,20,50,All]"
    data-search="false"
    data-undefined-text=""
    >
    <caption>Real-Time fetched data</caption>
    <thead>
        <tr>
            <th scope="col" data-sortable="true" data-field="COUNT">Count</th>
            <th scope="col" data-sortable="true" data-field="DIS_DESC">Disease</th>
            <th scope="col" data-sortable="true" data-field="PAT_CITY">Woreda/Town</th>
            <th scope="col" data-sortable="true" data-field="PAT_ADDR">Kebele</th>
            <th scope="col" data-sortable="true" data-field="LOC_W_CODE" data-cell-style="cellStyleWCODE">W_CODE</th>
            <th scope="col" data-sortable="true" data-field="LOC_RK_CODE" data-cell-style="cellStyleRKCODE">RK_CODE</th>
            <th scope="col" id="location" data-sortable="true" data-field="LOC_OK" data-cell-style="cellStylePH" data-width="1">HP</th>
        </tr>
    </thead>
</table>

<script type="text/javascript">

    /**
     * (function) update table from URL
     */ 
     function update_table(newUrl) {
        var myTable = $('#table_primary');
        myTable.bootstrapTable('refresh', {url: newUrl});
        myTable.bootstrapTable('resetView');
        myTable.bootstrapTable('resetSearch');
        //console.log(myTable.bootstrapTable("getData"));
        
    }

    /**
     * (function) update table with data
     */
    function update_table_data(data) {
        var myTable = $('#table_primary');
        myTable.bootstrapTable('load', data)
        myTable.bootstrapTable('resetView');
        myTable.bootstrapTable('resetSearch');
        tippy('#table_primary', {
            content: "Data with applied filters",
        });
    }

    function cellStyleWCODE(value, row, index) {
        
        if (row['LOC_RK_CODE'] > 0) {
            return {
                classes:'bg-warning'
            }  
        } else if (row['LOC_W_CODE'] > 0) {
            return {
                css: { 'background-color': '#238b45'}
            }
        } else {
            return {
                classes: 'bg-secondary'
            }
        }
    }

    function cellStyleRKCODE(value, row, index) {
        
        if (row['LOC_RK_CODE'] > 0) {
            return {
                classes:'bg-warning'
            }  
        } else {
            return {
                classes: 'bg-white'
            }
        }
    }

    function cellStylePH(value, row, index) {
        
        //console.log(value);
        //console.log(row);
        //console.log(index);

        if (row['LOC_OK'] == 1) {
            return {
                css: { "color" : '#007bff',
                        "background-color" : '#007bff'
                },
            }
        }

        return {
            css: { color: '#FFFFFF' },
            classes: 'bg-white'
        }
    }

</script>